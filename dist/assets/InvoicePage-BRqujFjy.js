import{E as e,ad as N,r,a3 as y,J as w,I as v,L as h,a5 as _,_ as S}from"./index-BrZuWI6n.js";import{l as L}from"./index-CizDwaz_.js";import{B as c}from"./Button-Y7kV2YOr.js";import{C as D}from"./Card-xKmTyOZv.js";import{A as p}from"./arrow-left-oY4UIA5K.js";import{P as I}from"./printer-UXZF57t9.js";const P=({order:a})=>{const{customer:s}=a;return e.jsxs("div",{className:"bg-white rounded-lg p-6",children:[e.jsxs("div",{className:"flex justify-between items-start mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"INVOICE"}),e.jsxs("p",{className:"text-sm text-gray-600",children:["#",a.id]})]}),e.jsx("div",{className:"text-right",children:e.jsxs("p",{className:"text-sm text-gray-600",children:["Date: ",new Date(a.date).toLocaleDateString()]})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-8",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-800",children:"Bill To:"}),e.jsx("p",{className:"text-gray-700",children:s==null?void 0:s.name}),e.jsx("p",{className:"text-gray-600",children:s==null?void 0:s.address}),e.jsxs("p",{className:"text-gray-600",children:["Phone: ",s==null?void 0:s.phone]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-800",children:"From:"}),e.jsx("p",{className:"text-gray-700",children:"Classic Offset and cards"}),e.jsx("p",{className:"text-gray-600",children:"363, bazar road, kadayanallur -62775"}),e.jsx("p",{className:"text-gray-600",children:"Tenkasi District - Tamil Nadu"}),e.jsx("p",{className:"text-gray-600",children:"Phone: +91 98425 78847"})]})]}),e.jsx("div",{className:"mb-8",children:e.jsxs("table",{className:"min-w-full bg-white border border-gray-200",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-100 text-gray-700",children:[e.jsx("th",{className:"py-2 px-4 text-left border-b",children:"Description"}),e.jsx("th",{className:"py-2 px-4 text-right border-b",children:"Amount"})]})}),e.jsx("tbody",{children:e.jsxs("tr",{children:[e.jsxs("td",{className:"py-2 px-4 border-b text-gray-800",children:["Order #",a.id," Details"]}),e.jsxs("td",{className:"py-2 px-4 text-right border-b text-gray-800",children:["тВ╣",a.total_amount.toLocaleString()]})]})})]})}),e.jsx("div",{className:"flex justify-end",children:e.jsxs("div",{className:"w-full max-w-xs",children:[e.jsxs("div",{className:"flex justify-between py-2 border-b border-gray-200",children:[e.jsx("span",{className:"text-gray-700",children:"Subtotal:"}),e.jsxs("span",{className:"font-semibold text-gray-800",children:["тВ╣",a.total_amount.toLocaleString()]})]}),e.jsxs("div",{className:"flex justify-between py-2 border-b border-gray-200",children:[e.jsx("span",{className:"text-gray-700",children:"Amount Paid:"}),e.jsxs("span",{className:"font-semibold text-green-600",children:["тВ╣",a.paid.toLocaleString()]})]}),e.jsxs("div",{className:"flex justify-between py-2 font-bold text-lg border-b-4 border-gray-300",children:[e.jsx("span",{className:"text-gray-800",children:"Balance Due:"}),e.jsxs("span",{className:a.balance>0?"text-red-600":"text-green-600",children:["тВ╣",a.balance.toLocaleString()]})]})]})}),e.jsxs("div",{className:"mt-8 text-center text-sm text-gray-500",children:[e.jsx("p",{children:"Thank you for your business!"}),e.jsx("p",{children:"Classic Offset - Your trusted printing partner."})]})]})},B=()=>{var m;const{id:a}=N(),[s,u]=r.useState(null),[j,n]=r.useState(!0),[d,i]=r.useState(null),g=y(),o=r.useRef(null),f=L.useReactToPrint({content:()=>o.current,documentTitle:`Invoice #${(s==null?void 0:s.id)||a}`,onBeforeGetContent:()=>new Promise(l=>setTimeout(l,250)),pageStyle:"@media print { body { -webkit-print-color-adjust: exact; } @page { size: A4; margin: 20mm; } }"}),b=()=>{if(s&&s.customer&&s.customer.phone&&s.id&&s.customer_id){const l=new URLSearchParams({orderId:s.id.toString(),customerId:s.customer_id,customerName:s.customer.name});g(`/whatsapp?${l.toString()}`)}};return r.useEffect(()=>{if(!a){i("URL-ро▓ро┐ро▓рпН роЗройрпНро╡ро╛ропрпНро╕рпН роРроЯро┐ (ID) роЗро▓рпНро▓рпИ."),n(!1);return}(async()=>{n(!0),i(null);try{const{data:t,error:x}=await S.from("all_order_summary").select("order_id, order_date, total_amount, amount_paid, balance_due, customer_id, customer_name, customer_phone").eq("order_id",a).single();if(x)throw x;if(!t)throw new Error(`роЗройрпНро╡ро╛ропрпНро╕рпН #${a} роХро┐роЯрпИроХрпНроХро╡ро┐ро▓рпНро▓рпИ.`);u({id:t.order_id,date:t.order_date,total_amount:t.total_amount,paid:t.amount_paid,balance:t.balance_due,customer_id:t.customer_id,customer:{name:t.customer_name||"родрпЖро░ро┐ропро╛род ро╡ро╛роЯро┐роХрпНроХрпИропро╛ро│ро░рпН",phone:t.customer_phone||"",address:null}})}catch(t){console.error("роЗройрпНро╡ро╛ропрпНро╕рпН родро░ро╡рпИрокрпН рокрпЖро▒рпБро╡родро┐ро▓рпН рокро┐ро┤рпИ:",t),i(t.message||"роЗройрпНро╡ро╛ропрпНро╕рпН родро░ро╡рпИ роПро▒рпНро▒ роорпБроЯро┐ропро╡ро┐ро▓рпНро▓рпИ. роорпАрогрпНроЯрпБроорпН роорпБропро▒рпНроЪро┐роХрпНроХро╡рпБроорпН.")}finally{n(!1)}})()},[a]),j?e.jsxs("div",{className:"flex flex-col justify-center items-center min-h-[calc(100vh-200px)]",children:[e.jsx(w,{className:"w-12 h-12 animate-spin text-primary-500"}),e.jsxs("p",{className:"mt-3 text-gray-600 dark:text-gray-400",children:["роЗройрпНро╡ро╛ропрпНро╕рпН #",a," роПро▒рпНро▒рокрпНрокроЯрпБроХро┐ро▒родрпБ..."]})]}):d||!s?e.jsxs(D,{className:"p-6 m-4 bg-red-50 text-red-700 border border-red-300 text-center",children:[e.jsx(v,{className:"w-12 h-12 mx-auto mb-3 text-red-500"}),e.jsx("p",{className:"font-semibold text-lg",children:"роЗройрпНро╡ро╛ропрпНро╕рпН роПро▒рпНро▒рпБро╡родро┐ро▓рпН рокро┐ро┤рпИ"}),e.jsx("p",{className:"text-sm mb-4",children:d||"роЗройрпНро╡ро╛ропрпНро╕рпН роХрогрпНроЯрпБрокро┐роЯро┐роХрпНроХ роорпБроЯро┐ропро╡ро┐ро▓рпНро▓рпИ."}),e.jsx(h,{to:"/invoices",children:e.jsxs(c,{variant:"secondary",className:"flex items-center mx-auto",children:[e.jsx(p,{className:"w-4 h-4 mr-2"}),"роЕройрпИродрпНродрпБ роЗройрпНро╡ро╛ропрпНро╕рпНроХро│рпБроХрпНроХрпБроорпН родро┐ро░рпБроорпНрокрпБроХ"]})})]}):e.jsxs("div",{className:"p-4 sm:p-6 max-w-5xl mx-auto space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center gap-4",children:[e.jsxs("div",{children:[e.jsxs(h,{to:"/invoices",className:"text-sm text-primary-600 hover:underline flex items-center mb-1",children:[e.jsx(p,{className:"w-4 h-4 mr-1"}),"роЕройрпИродрпНродрпБ роЗройрпНро╡ро╛ропрпНро╕рпНроХро│рпБроХрпНроХрпБроорпН родро┐ро░рпБроорпНрокрпБроХ"]}),e.jsxs("h1",{className:"text-xl sm:text-2xl font-bold text-gray-800 dark:text-white",children:["ЁЯз╛ роЗройрпНро╡ро╛ропрпНро╕рпН #",s.id]})]}),e.jsxs("div",{className:"flex items-center space-x-2 w-full sm:w-auto",children:[e.jsxs(c,{onClick:f,variant:"secondary",className:"w-1/2 sm:w-auto flex-1 sm:flex-none",children:[e.jsx(I,{className:"w-4 h-4 mr-2"}),"роЕроЪрпНроЪро┐роЯрпБ / рокродро┐ро╡ро┐ро▒роХрпНроХрпБ"]}),e.jsxs(c,{variant:"success",className:"w-1/2 sm:w-auto flex-1 sm:flex-none",onClick:b,disabled:!((m=s.customer)!=null&&m.phone),children:[e.jsx(_,{className:"w-4 h-4 mr-2"}),"WhatsApp"]})]})]}),e.jsx("div",{ref:o,className:"bg-white rounded-lg shadow-md p-2 sm:p-4",children:e.jsx(P,{order:s})})]})};export{B as default};
