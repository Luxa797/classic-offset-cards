import{r,E as e,U as y,I as j,F as d,J as v,_ as N}from"./index-DM-CIWAp.js";import{G as w}from"./GeminiChat-CK5fYptO.js";import{M as C}from"./MetricCard-DPp9P_hZ.js";import{I as _,Z as k}from"./zap-fIf8vjmZ.js";import{S as I}from"./shopping-cart-CWveINg6.js";import{M as E}from"./mic-CMz7vgts.js";import{P as S}from"./palette-D0ks3BPQ.js";import"./Input-C5fRLLhS.js";import"./Button-CSkHMulG.js";import"./send-BMFSPLCc.js";import"./Card-Cs5NGpgY.js";const F=()=>{const[a,o]=r.useState(null),[m,i]=r.useState(!0),[n,l]=r.useState(null),[p,u]=r.useState("Give me a summary of my business performance today."),[h,x]=r.useState(0);r.useEffect(()=>{(async()=>{i(!0),l(null);try{const{data:t,error:c}=await N.rpc("get_dashboard_metrics");if(c)throw new Error(`Database error: ${c.message}`);t&&t.length>0?o(t[0]):o({total_revenue:0,total_customers_count:0,orders_due_count:0,balance_due:0})}catch(t){console.error("Error fetching dashboard metrics:",t),l("Failed to load key metrics. Please try refreshing the page.")}finally{i(!1)}})()},[]);const g=s=>{u(s),x(t=>t+1)},b=a?[{icon:e.jsx(_,{size:28}),label:"Total Revenue",value:a.total_revenue,colorClass:"bg-gradient-to-br from-green-500 to-green-700",prompt:"Give me a detailed breakdown of this month's revenue."},{icon:e.jsx(y,{size:28}),label:"Total Customers",value:a.total_customers_count,colorClass:"bg-gradient-to-br from-blue-500 to-blue-700",prompt:"Show me the newest customers."},{icon:e.jsx(I,{size:28}),label:"Due Orders",value:a.orders_due_count,colorClass:"bg-gradient-to-br from-amber-500 to-amber-700",prompt:"Which orders have pending payments?"},{icon:e.jsx(j,{size:28}),label:"Total Due Amount",value:a.balance_due,colorClass:"bg-gradient-to-br from-red-500 to-red-700",prompt:"List all customers with outstanding balances."}]:[],f=[{icon:e.jsx(k,{size:20,className:"text-yellow-400"}),text:"Gemini AI Integration: Ask complex questions in Tamil or English and get professional reports."},{icon:e.jsx(E,{size:20,className:"text-red-400"}),text:"Voice Input Enabled: Use the microphone icon in the chatbox to ask questions with your voice."},{icon:e.jsx(S,{size:20,className:"text-blue-400"}),text:"Interactive Cards: Click on any metric card above to get a detailed analysis of that metric."}];return e.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 space-y-8",children:[e.jsxs(d.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-800 dark:text-white",children:"AI Business Insights ðŸ§ "}),e.jsx("p",{className:"mt-2 text-gray-600 dark:text-gray-400",children:"Get real-time metrics and chat with your intelligent business analyst."})]}),e.jsxs("div",{className:"bg-gray-800/80 backdrop-blur-sm border border-gray-700 p-4 rounded-xl",children:[e.jsx("h3",{className:"font-semibold text-lg text-white mb-3",children:"ðŸš€ What's New?"}),e.jsx("div",{className:"space-y-3",children:f.map((s,t)=>e.jsxs(d.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.2+t*.1},className:"flex items-center gap-3 p-3 bg-gray-700/50 rounded-lg",children:[s.icon,e.jsx("span",{className:"text-gray-300 text-sm",children:s.text})]},t))})]}),m?e.jsx("div",{className:"flex justify-center items-center h-48",children:e.jsx(v,{className:"w-12 h-12 text-primary-500 animate-spin"})}):n?e.jsx("div",{className:"p-6 bg-red-50 dark:bg-red-900/20 text-red-700 dark:text-red-300 rounded-lg text-center",children:e.jsx("p",{children:n})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6",children:b.map((s,t)=>e.jsx("div",{onClick:()=>g(s.prompt),className:"cursor-pointer transform hover:scale-105 transition-transform duration-300",children:e.jsx(C,{...s,index:t})},s.label))}),e.jsx("div",{className:"h-[600px] bg-white dark:bg-gray-800/50 rounded-2xl shadow-lg",children:e.jsx(w,{starterPrompt:p},h)})]})};export{F as default};
