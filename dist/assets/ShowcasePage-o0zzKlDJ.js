import{r,_ as p,E as e,J as b,I as E}from"./index-BrZuWI6n.js";import{M as R}from"./Modal-BMGMe01h.js";import{S}from"./Select-DE_vlw4B.js";import{B as L}from"./Button-Y7kV2YOr.js";import{I as K,Z as W,L as Z,H as J}from"./lucide-react-Cue27OAv.js";import{C as Q,a as V,S as z}from"./star-Cdk6k4-P.js";import{F as _}from"./wallet-gj69Wla7.js";import{C as N}from"./Card-xKmTyOZv.js";import"./activity-BO_KiDUJ.js";import"./align-left-67gkpNC2.js";import"./truck-B3LETqpz.js";import"./arrow-up-narrow-wide-DyDCMqqE.js";import"./arrow-left-oY4UIA5K.js";import"./arrow-up-down-DGTL9ZAM.js";import"./party-popper-DZpWQb__.js";import"./bar-chart-oYYyEedq.js";import"./line-chart-ByIuT5cU.js";import"./calendar-DM4ie2pQ.js";import"./check-circle-C2YmYjWO.js";import"./check-square-mMlXiYph.js";import"./clipboard-list-CtO7-ci1.js";import"./clock-B4OpXVRS.js";import"./credit-card-B7x4UwUa.js";import"./download-k6OJzgo5.js";import"./eye-OtKGbGJY.js";import"./file-x-W9BLWbUN.js";import"./filter-BIa6Cu1a.js";import"./hash-BpBMA1wf.js";import"./history-Dr8AuQ-n.js";import"./zap-fX7f5YBS.js";import"./mic-DF5lb9ET.js";import"./list-RA9xVGnp.js";import"./map-pin-DsoYM0sj.js";import"./minus-DCjoQjVk.js";import"./package-2-xl6N1iI1.js";import"./palette-BczBXaMH.js";import"./toggle-right-vJkxmOGn.js";import"./pie-chart-hLwS1_iT.js";import"./plus-circle-B-gCO85v.js";import"./plus-CZcm7rQq.js";import"./printer-UXZF57t9.js";import"./refresh-cw-Di_JIgB0.js";import"./trending-up-DJspZo-b.js";import"./search-B3PwDds0.js";import"./send-CqUFPTJk.js";import"./server-crash-CYKV-IOm.js";import"./shopping-cart-DAbMakod.js";import"./square-pen-2qeXRQVg.js";import"./tag-445ko3n6.js";import"./trash-2-Cbos4vZN.js";import"./trending-down-BLKNbRU5.js";import"./user-plus-B0h9sTww.js";import"./user-Ch7A4cej.js";const C=8,X=({refreshKey:i})=>{const[m,x]=r.useState([]),[c,n]=r.useState(!0),[o,l]=r.useState(null),[s,a]=r.useState(null),[d,h]=r.useState(1),[I,A]=r.useState(0),[u,T]=r.useState("All"),[v,U]=r.useState("uploaded_at"),[w,G]=r.useState("desc"),[B,M]=r.useState([]),F=r.useCallback(async()=>{n(!0),l(null);try{let t=p.from("gallery_items").select("*",{count:"exact"});u!=="All"&&(t=t.eq("category",u)),t=t.order(v,{ascending:w==="asc"});const g=(d-1)*C,y=g+C-1;t=t.range(g,y);const{data:k,error:j,count:q}=await t;if(j)throw j;const D=(k||[]).map(P=>{const{data:H}=p.storage.from("gallery").getPublicUrl(P.filename);return{...P,publicUrl:H.publicUrl}});x(D),A(q||0)}catch(t){console.error("❌ Error fetching gallery items:",t.message),l(`Failed to load gallery images: ${t.message}`)}finally{n(!1)}},[d,u,v,w]);r.useEffect(()=>{(async()=>{const{data:g,error:y}=await p.from("gallery_items").select("category",{distinct:!0});if(y)console.error("Error fetching categories:",y.message);else{const k=g==null?void 0:g.map(j=>j.category).filter(Boolean);M(["All",...new Set(k)].sort())}})()},[]),r.useEffect(()=>{F()},[F,i]);const f=Math.ceil(I/C),O=()=>{d<f&&h(t=>t+1)},$=()=>{d>1&&h(t=>t-1)};return c?e.jsxs("div",{className:"flex justify-center items-center py-12",children:[e.jsx(b,{className:"w-8 h-8 animate-spin text-primary-500"}),e.jsx("span",{className:"ml-2 text-gray-500 dark:text-gray-400",children:"Loading gallery..."})]}):o?e.jsxs("div",{className:"p-4 bg-red-50 dark:bg-red-900/30 text-red-700 dark:text-red-300 rounded-md flex items-center gap-2",children:[e.jsx(AlertTriangle,{className:"w-5 h-5"}),e.jsx("span",{children:o})]}):m.length===0&&I===0?e.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-gray-500 dark:text-gray-400",children:[e.jsx(K,{className:"w-12 h-12 mb-4"}),e.jsx("p",{className:"text-lg font-semibold",children:"No images in the gallery yet."}),e.jsx("p",{className:"text-sm",children:"Upload your first print creation above!"})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-4 mb-6",children:[e.jsx(S,{id:"category-filter",label:"Filter by Category",value:u,onChange:t=>{T(t.target.value),h(1)},options:B.map(t=>({value:t,label:t})),placeholder:"All Categories"}),e.jsx(S,{id:"sort-by",label:"Sort By",value:v,onChange:t=>{U(t.target.value),h(1)},options:[{value:"uploaded_at",label:"Upload Date"},{value:"title",label:"Title"},{value:"category",label:"Category"}]}),e.jsx(S,{id:"sort-order",label:"Order",value:w,onChange:t=>{G(t.target.value),h(1)},options:[{value:"desc",label:"Descending"},{value:"asc",label:"Ascending"}]})]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:m.map(t=>e.jsxs("div",{className:"relative rounded-lg overflow-hidden shadow-lg transition-transform transform hover:scale-105 duration-300 group cursor-pointer",onClick:()=>a(t),children:[e.jsx("img",{src:t.publicUrl,alt:t.title||t.category||"Gallery Image",className:"w-full h-64 object-cover"}),e.jsxs("div",{className:"absolute inset-0 bg-black bg-opacity-40 flex items-end p-4 opacity-0 group-hover:opacity-100 transition-opacity",children:[e.jsxs("div",{className:"text-white",children:[e.jsx("h4",{className:"font-semibold text-lg",children:t.title||t.category}),t.description&&e.jsx("p",{className:"text-xs line-clamp-2",children:t.description})]}),e.jsx(W,{className:"absolute top-2 right-2 text-white opacity-70 group-hover:opacity-100",size:20})]})]},t.id))}),f>1&&e.jsxs("div",{className:"flex justify-center items-center gap-4 mt-6",children:[e.jsxs(L,{onClick:$,disabled:d===1,variant:"outline",size:"sm",children:[e.jsx(Q,{size:16})," Previous"]}),e.jsxs("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:["Page ",d," of ",f]}),e.jsxs(L,{onClick:O,disabled:d===f,variant:"outline",size:"sm",children:["Next ",e.jsx(V,{size:16})]})]}),s&&e.jsx(R,{isOpen:!!s,onClose:()=>a(null),title:s.title||s.category||"Gallery Image",size:"lg",children:e.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[e.jsx("img",{src:s.publicUrl,alt:s.title||"Gallery Image",className:"max-w-full h-auto rounded-lg"}),s.description&&e.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-300 text-center",children:s.description}),e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Category: ",s.category," | Uploaded on: ",new Date(s.uploaded_at).toLocaleDateString()]})]})})]})},Y=()=>{const[i,m]=r.useState([]),[x,c]=r.useState(!0),[n,o]=r.useState(null);r.useEffect(()=>{(async()=>{c(!0),o(null);try{const{data:a,error:d}=await p.from("features").select("*").eq("is_active",!0).order("order_index",{ascending:!0});if(d)throw d;m(a||[])}catch(a){console.error("❌ Error fetching features:",a.message),o(`Failed to load features: ${a.message}`)}finally{c(!1)}})()},[]);const l=s=>{const a=Z[s];return a?e.jsx(a,{size:28}):e.jsx(J,{size:28})};return x?e.jsxs("div",{className:"flex justify-center items-center py-12",children:[e.jsx(b,{className:"w-8 h-8 animate-spin text-primary-500"}),e.jsx("span",{className:"ml-2 text-gray-500 dark:text-gray-400",children:"Loading features..."})]}):n?e.jsxs("div",{className:"p-4 bg-red-50 dark:bg-red-900/30 text-red-700 dark:text-red-300 rounded-md flex items-center gap-2",children:[e.jsx(E,{className:"w-5 h-5"}),e.jsx("span",{children:n})]}):i.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-gray-500 dark:text-gray-400",children:[e.jsx(_,{className:"w-12 h-12 mb-4"}),e.jsx("p",{className:"text-lg font-semibold",children:"No features defined yet."}),e.jsx("p",{className:"text-sm",children:"Add features in your admin panel."})]}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:i.map(s=>e.jsxs("div",{className:"flex items-start gap-4 bg-white dark:bg-zinc-800 p-4 rounded-lg shadow border border-gray-200 dark:border-gray-700",children:[e.jsx("div",{className:"text-blue-600 dark:text-blue-400",children:l(s.icon_name)})," ",e.jsxs("div",{children:[e.jsx("h4",{className:"text-md font-semibold text-gray-800 dark:text-white mb-1",children:s.title}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:s.description})]})]},s.id))})},ee=()=>{const[i,m]=r.useState(null),[x,c]=r.useState(!0),[n,o]=r.useState(null);return r.useEffect(()=>{(async()=>{c(!0),o(null);try{const{data:s,error:a}=await p.from("site_content").select("content").eq("section_name","BrandingCopyMain").single();if(a&&a.code!=="PGRST116")throw a;m((s==null?void 0:s.content)||null)}catch(s){console.error("❌ Error fetching branding content:",s.message),o(`Failed to load branding content: ${s.message}`)}finally{c(!1)}})()},[]),x?e.jsxs("div",{className:"flex justify-center items-center py-8",children:[e.jsx(b,{className:"w-8 h-8 animate-spin text-primary-500"}),e.jsx("span",{className:"ml-2 text-gray-500 dark:text-gray-400",children:"Loading branding content..."})]}):n?e.jsxs("div",{className:"p-4 bg-red-50 dark:bg-red-900/30 text-red-700 dark:text-red-300 rounded-md flex items-center gap-2",children:[e.jsx(E,{className:"w-5 h-5"}),e.jsx("span",{children:n})]}):i?e.jsx("div",{className:"space-y-6 text-gray-700 dark:text-gray-300 text-sm md:text-base leading-relaxed",children:e.jsx("div",{dangerouslySetInnerHTML:{__html:i}})}):e.jsxs("div",{className:"flex flex-col items-center justify-center py-8 text-gray-500 dark:text-gray-400",children:[e.jsx(_,{className:"w-12 h-12 mb-4"}),e.jsx("p",{className:"text-lg font-semibold",children:"Branding content not available."}),e.jsx("p",{className:"text-sm",children:"Please add content for 'BrandingCopyMain' in the admin panel."})]})},te=()=>{const[i,m]=r.useState([]),[x,c]=r.useState(!0),[n,o]=r.useState(null);return r.useEffect(()=>{(async()=>{c(!0),o(null);try{const{data:s,error:a}=await p.from("testimonials").select("*").eq("is_approved",!0).order("created_at",{ascending:!1});if(a)throw a;m(s||[])}catch(s){console.error("❌ Error fetching testimonials:",s.message),o(`Failed to load testimonials: ${s.message}`)}finally{c(!1)}})()},[]),x?e.jsxs("div",{className:"flex justify-center items-center py-12",children:[e.jsx(b,{className:"w-8 h-8 animate-spin text-primary-500"}),e.jsx("span",{className:"ml-2 text-gray-500 dark:text-gray-400",children:"Loading testimonials..."})]}):n?e.jsxs("div",{className:"p-4 bg-red-50 dark:bg-red-900/30 text-red-700 dark:text-red-300 rounded-md flex items-center gap-2",children:[e.jsx(E,{className:"w-5 h-5"}),e.jsx("span",{children:n})]}):i.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-gray-500 dark:text-gray-400",children:[e.jsx(_,{className:"w-12 h-12 mb-4"}),e.jsx("p",{className:"text-lg font-semibold",children:"No testimonials available yet."}),e.jsx("p",{className:"text-sm",children:"Please add and approve testimonials in the admin panel."})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:i.map(l=>e.jsxs("div",{className:"bg-gray-50 dark:bg-zinc-800 p-4 rounded-md shadow border border-gray-200 dark:border-gray-700",children:[e.jsxs("p",{className:"text-sm text-gray-700 dark:text-gray-200 italic mb-2",children:["“",l.message,"”"]}),e.jsxs("p",{className:"text-sm font-medium text-gray-800 dark:text-gray-100",children:["– ",l.client_name,l.rating&&e.jsxs("span",{className:"ml-2 flex items-center",children:[Array(l.rating).fill(0).map((s,a)=>e.jsx(z,{size:14,className:"text-yellow-500 fill-current"},a)),Array(5-l.rating).fill(0).map((s,a)=>e.jsx(z,{size:14,className:"text-gray-300"},`empty-${a}`))]})]})]},l.id))})},tt=()=>{const[i,m]=r.useState(0);return e.jsxs("div",{className:"container mx-auto px-4 md:px-8 py-6 space-y-12",children:[e.jsxs("section",{children:[e.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 dark:text-white mb-4",children:"📸 Our Gallery"}),e.jsx(N,{className:"p-4",children:e.jsx(X,{refreshKey:i})})]}),e.jsxs("section",{children:[e.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 dark:text-white mb-4",children:"🌟 Highlight Features"}),e.jsx(N,{className:"p-4",children:e.jsx(Y,{})})]}),e.jsxs("section",{children:[e.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 dark:text-white mb-4",children:"🖋️ Why Choose Us?"}),e.jsx(N,{className:"p-4",children:e.jsx(ee,{})})]}),e.jsxs("section",{children:[e.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 dark:text-white mb-4",children:"💬 Client Praise"}),e.jsx(N,{className:"p-4",children:e.jsx(te,{})})]})]})};export{tt as default};
