import{r as n,E as e,J as j,a0 as m,_ as v}from"./index-DM-CIWAp.js";import{M as N}from"./Modal-vVolvInd.js";import{I as x}from"./Input-C5fRLLhS.js";import{B as f}from"./Button-CSkHMulG.js";const q=({isOpen:b,onClose:o,onSuccess:g})=>{const[a,i]=n.useState(""),[l,d]=n.useState(""),[s,c]=n.useState(!1),[p,u]=n.useState(null),y=async r=>{if(r.preventDefault(),u(null),!a.trim()||!l.trim()){u("Both name and phone number are required."),m.error("Name and phone cannot be empty.");return}c(!0);try{const{data:t,error:h}=await v.from("customers").insert({name:a,phone:l}).select().single();if(h)throw h;m.success(`Customer "${a}" was added successfully!`),g(t),o(),i(""),d("")}catch(t){console.error("Error adding customer:",t),m.error(t.message||"An unexpected error occurred."),u(t.message)}finally{c(!1)}};return e.jsx(N,{isOpen:b,onClose:o,title:"Add a New Customer",children:e.jsxs("form",{onSubmit:y,className:"p-4 space-y-4",children:[p&&e.jsx("p",{className:"text-red-500 text-sm bg-red-50 p-2 rounded",children:p}),e.jsx(x,{id:"name",label:"Customer Name",value:a,onChange:r=>i(r.target.value),placeholder:"Enter the customer's full name",required:!0}),e.jsx(x,{id:"phone",label:"Phone Number",type:"tel",value:l,onChange:r=>d(r.target.value),placeholder:"Enter a 10-digit phone number",required:!0}),e.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[e.jsx(f,{type:"button",variant:"secondary",onClick:o,disabled:s,children:"Cancel"}),e.jsxs(f,{type:"submit",variant:"primary",disabled:s,children:[s?e.jsx(j,{className:"animate-spin mr-2"}):null,s?"Saving...":"Save Customer"]})]})]})})};export{q as C};
