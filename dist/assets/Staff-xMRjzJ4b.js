import{E as e,U as h,r as a,_ as p,a0 as g,J as u,I as j}from"./index-BrZuWI6n.js";import{C as y}from"./Card-xKmTyOZv.js";import{M as d}from"./MetricCard-CzltRZ_8.js";import{C as v}from"./check-square-mMlXiYph.js";import{C as N}from"./clock-B4OpXVRS.js";const b=({employees:s,logs:r})=>{const t=s.filter(c=>c.is_active).length,i=r.length;return e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[e.jsx(d,{title:"Active Staff",value:t.toString(),icon:e.jsx(h,{className:"w-6 h-6 text-blue-500"})}),e.jsx(d,{title:"Total Logs This Period",value:i.toString(),icon:e.jsx(v,{className:"w-6 h-6 text-green-500"}),tooltip:"Represents the number of work logs filed."}),e.jsx(d,{title:"Coming Soon",value:"- hrs",icon:e.jsx(N,{className:"w-6 h-6 text-yellow-500"}),tooltip:"Total hours worked calculation will be added in a future update."})]})},w=({employees:s})=>{const r=t=>t?"bg-green-100 text-green-800":"bg-red-100 text-red-800";return e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700/50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Name"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Role"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Contact"}),e.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase",children:"Status"})]})}),e.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:s.map(t=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white",children:t.name}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300",children:t.job_role}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300",children:[e.jsx("div",{children:t.contact_email}),e.jsx("div",{className:"text-xs",children:t.contact_phone})]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center text-sm",children:e.jsx("span",{className:`px-2.5 py-0.5 rounded-full text-xs font-semibold ${r(t.is_active)}`,children:t.is_active?"Active":"Inactive"})})]},t.id))})]})})},L=()=>{const[s,r]=a.useState([]),[t,i]=a.useState([]),[c,n]=a.useState(!0),[x,m]=a.useState(null),f=a.useCallback(async()=>{n(!0),m(null);try{const[l,o]=await Promise.all([p.from("employees").select("*").order("name"),p.from("staff_logs").select("*, employees ( name, users ( name ) )").order("date",{ascending:!1}).limit(100)]);if(l.error)throw l.error;if(o.error)throw o.error;r(l.data||[]),i(o.data||[])}catch(l){m("Failed to load staff data: "+l.message),g.error("Failed to load staff data.")}finally{n(!1)}},[]);return a.useEffect(()=>{f()},[f]),c?e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx(u,{className:"w-8 h-8 animate-spin"})}):x?e.jsxs("div",{className:"p-6 bg-red-50 text-red-700 text-center",children:[e.jsx(j,{className:"mx-auto"})," ",x]}):e.jsxs("div",{className:"p-4 sm:p-6 space-y-6",children:[e.jsx("h1",{className:"text-2xl font-semibold",children:"Staff Overview"}),e.jsx(b,{employees:s,logs:t}),e.jsxs(y,{children:[e.jsx("div",{className:"p-4 border-b",children:e.jsx("h2",{className:"text-lg font-semibold",children:"Staff Members"})}),e.jsx("div",{className:"p-2",children:e.jsx(w,{employees:s})})]})]})};export{L as default};
